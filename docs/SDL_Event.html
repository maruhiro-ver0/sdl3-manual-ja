<!DOCTYPE html>
<html lang="ja-JP">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="keywords" content="Simple Directmedia Layer SDL3.0">
<link rel="top" href="index.html" title="ホーム">
<link rel="parent" href="CategoryEvents.html" title="1つ上">
<title>SDL_Event</title>
</head>
<body>
<a href="index.html">目次</a> - <a href="ApiByCategory.html">SDL 3.0 API(機能別)</a> - <a href="CategoryEvents.html">イベント処理</a> - SDL_Event
<hr>
<h1>SDL_Event</h1>
異なる種類のイベントの情報を持つ共用体
<h2>ヘッダ</h2>
<a href="https://github.com/libsdl-org/SDL/blob/main/include/SDL3/SDL_events.h">SDL3/SDL_events.h</a>
<h2>フィールド</h2>
<table border="1">
<tr><td>Uint32</td><td>type</td><td>イベントの種類, このフィールドは全種類のイベントで共用している. 型はUint32でSDL_EventType列挙体に存在しないユーザイベント値もありうる</td></tr>
<tr><td><a href="SDL_CommonEvent.html">SDL_CommonEvent</a></td><td>common</td><td>共通イベントの情報</td></tr>
<tr><td><a href="SDL_DisplayEvent.html">SDL_DisplayEvent</a></td><td>display</td><td>ディスプレイイベントの情報</td></tr>
<tr><td><a href="SDL_WindowEvent.html">SDL_WindowEvent</a></td><td>window</td><td>ウィンドウイベントの情報</td></tr>
<tr><td><a href="SDL_KeyboardDeviceEvent.html">SDL_KeyboardDeviceEvent</a></td><td>kdevice</td><td>キーボードデバイス変更イベント</td></tr>
<tr><td><a href="SDL_KeyboardEvent.html">SDL_KeyboardEvent</a></td><td>key</td><td>キーボードイベントの情報</td></tr>
<tr><td><a href="SDL_TextEditingEvent.html">SDL_TextEditingEvent</a></td><td>edit</td><td>テキスト編集イベントの情報</td></tr>
<tr><td><a href="DL_TextEditingCandidatesEvent.html">SDL_TextEditingCandidatesEvent</a></td><td>edit_candidates</td><td>テキスト編集変換候補イベント</td></tr>
<tr><td><a href="SDL_TextInputEvent.html">SDL_TextInputEvent</a></td><td>text</td><td>テキスト入力イベントの情報</td></tr>
<tr><td><a href="SDL_MouseDeviceEvent.html">SDL_MouseDeviceEvent</a></td><td>mdevice</td><td>マウスデバイス変更イベント</td></tr>
<tr><td><a href="SDL_MouseMotionEvent.html">SDL_MouseMotionEvent</a></td><td>motion</td><td>マウス移動イベントの情報</td></tr>
<tr><td><a href="SDL_MouseButtonEvent.html">SDL_MouseButtonEvent</a></td><td>button</td><td>マウスボタンイベントの情報</td></tr>
<tr><td><a href="SDL_MouseWheelEvent.html">SDL_MouseWheelEvent</a></td><td>wheel</td><td>マウスホイールイベントの情報</td></tr>
<tr><td><a href="SDL_JoyDeviceEvent.html">SDL_JoyDeviceEvent</a></td><td>jdevice</td><td>ジョイスティックデバイス変更イベントの情報</td></tr>
<tr><td><a href="SDL_JoyAxisEvent.html">SDL_JoyAxisEvent</a></td><td>jaxis</td><td>ジョイスティック方向イベントの情報</td></tr>
<tr><td><a href="SDL_JoyBallEvent.html">SDL_JoyBallEvent</a></td><td>jball</td><td>ジョイスティックボールイベントの情報</td></tr>
<tr><td><a href="SDL_JoyHatEvent.html">SDL_JoyHatEvent</a></td><td>jhat</td><td>ジョイスティックハットイベントの情報</td></tr>
<tr><td><a href="SDL_JoyButtonEvent.html">SDL_JoyButtonEvent</a></td><td>jbutton</td><td>ジョイスティックボタンイベントの情報</td></tr>
<tr><td><a href="SDL_JoyBatteryEvent.html">SDL_JoyBatteryEvent</a></td><td>jbattery</td><td>ジョイスティックバッテリーイベントの情報</td></tr>
<tr><td><a href="SDL_GamepadDeviceEvent.html">SDL_GamepadDeviceEvent</a></td><td>gdevice</td><td>ゲームパッドイベントの情報</td></tr>
<tr><td><a href="SDL_GamepadAxisEvent.html">SDL_GamepadAxisEvent</a></td><td>gaxis</td><td>ゲームパッド方向イベントの情報</td></tr>
<tr><td><a href="SDL_GamepadButtonEvent.html">SDL_GamepadButtonEvent</a></td><td>gbutton</td><td>ゲームパッドボタンイベントの情報</td></tr>
<tr><td><a href="SDL_GamepadTouchpadEvent.html">SDL_GamepadTouchpadEvent</a></td><td>gtouchpad</td><td>ゲームパッドタッチパッドイベントの情報</td></tr>
<tr><td><a href="SDL_GamepadSensorEvent.html">SDL_GamepadSensorEvent</a></td><td>gsensor</td><td>ゲームパッドセンサーイベントの情報</td></tr>
<tr><td><a href="SDL_AudioDeviceEvent.html">SDL_AudioDeviceEvent</a></td><td>adevice</td><td>オーディオデバイスイベントの情報</td></tr>
<tr><td><a href="SDL_CameraDeviceEvent.html">SDL_CameraDeviceEvent</a></td><td>cdevice</td><td>カメラデバイスイベントの情報</td></tr>
<tr><td><a href="SDL_SensorEvent.html">SDL_SensorEvent</a></td><td>sensor</td><td>センサーイベントの情報</td></tr>
<tr><td><a href="SDL_QuitEvent.html">SDL_QuitEvent</a></td><td>quit</td><td>終了要求イベントの情報</td></tr>
<tr><td><a href="SDL_UserEvent.html">SDL_UserEvent</a></td><td>user</td><td>カスタムイベントの情報</td></tr>
<tr><td><a href="SDL_TouchFingerEvent.html">SDL_TouchFingerEvent</a></td><td>tfinger</td><td>指タッチイベントの情報</td></tr>
<tr><td><a href="SDL_PenProximityEvent.html">SDL_PenProximityEvent</a></td><td>pproximity</td><td>ペン接近イベントの情報</td></tr>
<tr><td><a href="SDL_PenTouchEvent.html">SDL_PenTouchEvent</a></td><td>ptouch</td><td>ペンタッチイベントの情報</td></tr>
<tr><td><a href="SDL_PenMotionEvent.html">SDL_PenMotionEvent</a></td><td>pmotion</td><td>ペン移動イベントの情報</td></tr>
<tr><td><a href="SDL_PenButtonEvent.html">SDL_PenButtonEvent</a></td><td>pbutton</td><td>ペンボタンイベントの情報</td></tr>
<tr><td><a href="SDL_PenAxisEvent.html">SDL_PenAxisEvent</a></td><td>paxis</td><td>ペン方向イベントの情報</td></tr>
<tr><td><a href="SDL_RenderEvent.html">SDL_RenderEvent</a></td><td>render</td><td>レンダーイベントの情報</td></tr>
<tr><td><a href="SDL_DropEvent.html">SDL_DropEvent</a></td><td>drop</td><td>ドラッグ&amp;ドロップイベントの情報</td></tr>
<tr><td><a href="SDL_ClipboardEvent.html">SDL_ClipboardEvent</a></td><td>clipboard</td><td>クリップボードイベントの情報</td></tr>
</table>
<h2>詳細</h2>
<p>
SDL_Eventは全てのSDLイベント処理の中核で,
SDLで使われる全てのイベント構造体の共用体である.
</p>
<h2>バージョン</h2>
SDL 3.2.0以降
<h2>イベントの使用法</h2>
SDL_Eventには2つの使い方がある
<ul>
<li><a href="#reading">キューからイベントを読み込む</a></li>
<li><a href="#push">キューにイベントを書き込む</a></li>
</ul>
<h3><a id="reading">キューからイベントを読み込む</a></h3>
<p>
<a href="SDL_PollEvent.html">SDL_PollEvent()</a>または<a href="SDL_PeepEvents.html">SDL_PeepEvents()</a>でキューからイベントを得られる.
<a href="SDL_PollEvent.html">SDL_PollEvent()</a>を例に説明する.
</p>
<p>
まず始めに, 空のSDL_Eventを生成する.
</p>
<p>
<code>
SDL_Event test_event;
</code>
</p>
<p>
<a href="SDL_PollEvent.html">SDL_PollEvent()</a>はイベントを読み込み, キューから削除する.
もしキューにイベントがなければ0を, あれば1を戻す.
whileループを使い, 全てのイベントを処理する.
</p>
<p>
<code>
<pre>
while (SDL_PollEvent(&amp;test_event)) {
</pre>
</code>
</p>
<p>
<a href="SDL_PollEvent.html">SDL_PollEvent()</a>は引数のSDL_Eventへのポインタにイベント情報を代入する.
<a href="SDL_PollEvent.html">SDL_PollEvent()</a>はイベントをキューから取り除き, その後test_eventに書き込む.
しかし, test_eventのtypeメンバにはイベントの種類も書き込まれている.
よって, 種類に応じてイベントを処理するためにはswitch文を使う.
</p>
<p>
<code>
</pre>
	switch (test_event.type) {
</pre>
</code>
</p>
<p>
得られたイベントが何であるか, そしてそのイベントの種類は何であるかを知る必要がある.
ここでは, アプリケーションでユーザがマウスを動かしたことを検知したいと想定する.
イベント種類を見渡すと, SDL_EVENT_MOUSE_MOTIONに気がつく. これが探しているイベントだろう.
<a href="#table">後の表</a>を見ると, SDL_EVENT_MOUSE_MOTIONイベントはSDL_Eventのメンバの<a href="SDL_MouseMotionEvent.html">SDL_MouseMotionEvent</a>で処理することが分かる.
SDL_EVENT_MOUSE_MOTIONのイベントの種類はswitch文の内部で次のようにチェックできる.
</p>
<p>
<code>
<pre>
	case SDL_EVENT_MOUSE_MOTION:
</pre>
</code>
</p>
<p>
test_eventのmotionメンバの情報を全て表示したいとすると
</p>
<p>
<code>
<pre>
		SDL_Log("マウス移動イベントを得た.¥n");
		SDL_Log("現在の位置は(%f, %f)¥n", test_event.motion.x, test_event.motion.y);
		break;
	default:
		SDL_Log("処理されないイベント!¥n");
		break;
	}
}
printf("イベントキューは空.¥n");
</pre>
</code>
</p>
<h3><a id="push">キューにイベントを書き込む</a></h3>
キューにイベントを入れることも可能で, 2つの方法がある.
<a href="SDL_PushEvent.html">SDL_PushEvent()</a>または<a href="SDL_PushEvent.html">SDL_PushEvent()</a>でキューにイベントを入れることができる.
通常, これはSDL_EVENT_USERをキューに入れるために使われる. しかし, 望むならばニセの入力イベントを発行するために使うこともできる.
自分でイベントを作るのはイベントを選択するよりも簡単である.
typeメンバを設定し, 構造体のメンバに適切な情報を書き込めばよい.
<p>
<code>
<pre>
SDL_Event user_event;
SDL_zero(user_event);  /* SDLはこの構造体全体をコピーする. メモリチェッカーが機嫌よくふるまうように初期化する */
user_event.type = SDL_EVENT_USER;
user_event.user.code = 2;
user_event.user.data1 = NULL;
user_event.user.data2 = NULL;
SDL_PushEvent(&user_event);
</pre>
</code>
</p>
<p>
SDL_EVENT_USERはSDLが使用しないイベント番号の先頭に過ぎないので注意すること.
アプリケーションの他の部分でも使用されないユニークな番号を得るには<a href="SDL_RegisterEvents.html">SDL_RegisterEvents</a>を使う必要がある.
</p>
<h3><a id="table">イベントの種類と共用体のメンバの関係</a></h3>
<table border="1">
<tr><th>イベントの種類(typeメンバ)</th><th>イベント構造体</th><th>SDL_Eventフィールド</th></tr>
<tr><td>SDL_EVENT_AUDIO_DEVICE_ADDED<br>SDL_EVENT_AUDIO_DEVICE_REMOVED<br>SDL_EVENT_AUDIO_DEVICE_FORMAT_CHANGED</td><td><a href="SDL_AudioDeviceEvent.html">SDL_AudioDeviceEvent</a></td><td>adevice</td></tr>
<tr><td>SDL_EVENT_CAMERA_DEVICE_ADDED<br>SDL_EVENT_CAMERA_DEVICE_REMOVED<br>SDL_EVENT_CAMERA_DEVICE_APPROVED<br>SDL_EVENT_CAMERA_DEVICE_DENIED</td><td><a href="SDL_CameraDeviceEvent.html">SDL_CameraDeviceEvent</a></td><td>cdevice</td></tr>
<tr><td>SDL_EVENT_CLIPBOARD_UPDATE</td><td><a href="SDL_ClipboardEvent.html">SDL_ClipboardEvent</a></td><td>clipboard</td></tr>
<tr><td>SDL_EVENT_DISPLAY_ORIENTATION<br>SDL_EVENT_DISPLAY_ADDED<br>SDL_EVENT_DISPLAY_REMOVED<br>SDL_EVENT_DISPLAY_MOVED<br>SDL_EVENT_DISPLAY_DESKTOP_MODE_CHANGED<br>SDL_EVENT_DISPLAY_CURRENT_MODE_CHANGED<br>SDL_EVENT_DISPLAY_CONTENT_SCALE_CHANGED<br>SDL_EVENT_DISPLAY_USABLE_BOUNDS_CHANGED</td><td><a href="SDL_DisplayEvent.html">SDL_DisplayEvent</a></td><td>display</td></tr>
<tr><td>SDL_EVENT_GAMEPAD_ADDED<br>SDL_EVENT_GAMEPAD_REMOVED<br>SDL_EVENT_GAMEPAD_REMAPPED<br>など</td><td><a href="SDL_GamepadDeviceEvent.html">SDL_GamepadDeviceEvent</a></td><td>gdevice</td></tr>
<tr><td>SDL_EVENT_GAMEPAD_AXIS_MOTION</td><td><a href="SDL_GamepadAxisEvent.html">SDL_GamepadAxisEvent</a></td><td>gaxis</td></tr>
<tr><td>SDL_EVENT_GAMEPAD_BUTTON_DOWN<br>SDL_EVENT_GAMEPAD_BUTTON_UP</td><td><a href="SDL_GamepadButtonEvent.html">SDL_GamepadButtonEvent</a></td><td>gbutton</td></tr>
<tr><td>SDL_EVENT_GAMEPAD_TOUCHPAD_DOWN<br>SDL_EVENT_GAMEPAD_TOUCHPAD_MOTION<br>など</td><td><a href="SDL_GamepadTouchpadEvent.html">SDL_GamepadTouchpadEvent</a></td><td>gtouchpad</td></tr>
<tr><td>SDL_EVENT_GAMEPAD_SENSOR_UPDATE</td><td><a href="SDL_GamepadSensorEvent.html">SDL_ControllerSensorEvent</a></td><td>gsensor</td></tr>
<tr><td>SDL_EVENT_DROP_BEGIN<br>SDL_EVENT_DROP_FILE<br>SDL_EVENT_DROP_TEXT<br>SDL_EVENT_DROP_COMPLETE<br>SDL_EVENT_DROP_POSITION</td><td><a href="SDL_DropEvent.html">SDL_DropEvent</a></td><td>drop</td></tr>
<tr><td>SDL_EVENT_FINGER_MOTION<br>SDL_EVENT_FINGER_DOWN<br>SDL_EVENT_FINGER_UP</td><td><a href="SDL_TouchFingerEvent.html">SDL_TouchFingerEvent</a></td><td>tfinger</td></tr>
<tr><td>SDL_EVENT_KEYBOARD_ADDED<br>SDL_EVENT_KEYBOARD_REMOVED</td><td><a href="SDL_KeyboardDeviceEvent.html">SDL_KeyboardDeviceEvent</a></td><td>kdevice</td></tr>
<tr><td>SDL_EVENT_KEY_DOWN<br>SDL_EVENT_KEY_UP</td><td><a href="SDL_KeyboardEvent.html">SDL_KeyboardEvent</a></td><td>key</td></tr>
<tr><td>SDL_EVENT_JOYSTICK_ADDED<br>SDL_EVENT_JOYSTICK_REMOVED<br>SDL_EVENT_JOYSTICK_UPDATE_COMPLETE</td><td><a href="SDL_JoyDeviceEvent.html">SDL_JoyDeviceEvent</a></td><td>jdevice</td></tr>
<tr><td>SDL_EVENT_JOYSTICK_AXIS_MOTION</td><td><a href="SDL_JoyAxisEvent.html">SDL_JoyAxisEvent</a></td><td>jaxis</td></tr>
<tr><td>SDL_EVENT_JOYSTICK_BALL_MOTION</td><td><a href="SDL_JoyBallEvent.html">SDL_JoyBallEvent</a></td><td>jball</td></tr>
<tr><td>SDL_EVENT_JOYSTICK_HAT_MOTION</td><td><a href="SDL_JoyHatEvent.html">SDL_JoyHatEvent</a></td><td>jhat</td></tr>
<tr><td>SDL_EVENT_JOYSTICK_BATTERY_UPDATED</td><td><a href="SDL_JoyBatteryEvent.html">SDL_JoyBatteryEvent</a></td><td>jbattery</td></tr>
<tr><td>SDL_EVENT_JOYSTICK_BUTTON_DOWN<br>SDL_EVENT_JOYSTICK_BUTTON_UP</td><td><a href="SDL_JoyButtonEvent.html">SDL_JoyButtonEvent</a></td><td>jbutton</td></tr>
<tr><td>SDL_EVENT_MOUSE_ADDED<br>SDL_EVENT_MOUSE_REMOVED</td><td><a href="SDL_MouseDeviceEvent.html">SDL_MouseDeviceEvent</a></td><td>mdevice</td></tr>
<tr><td>SDL_EVENT_MOUSE_MOTION</td><td><a href="SDL_MouseMotionEvent.html">SDL_MouseMotionEvent</a></td><td>motion</td></tr>
<tr><td>SDL_EVENT_MOUSE_BUTTON_DOWN<br>SDL_EVENT_MOUSE_BUTTON_UP</td><td><a href="SDL_MouseButtonEvent.html">SDL_MouseButtonEvent</a></td><td>button</td></tr>
<tr><td>SDL_EVENT_MOUSE_WHEEL</td><td><a href="SDL_MouseWheelEvent.html">SDL_MouseWheelEvent</a></td><td>wheel</td></tr>
<tr><td>SDL_EVENT_PEN_PROXIMITY_IN<br>SDL_EVENT_PEN_PROXIMITY_OUT</td><td><a href="SDL_PenProximityEvent.html">SDL_PenProximityEvent</a></td><td>pproximity</td></tr>
<tr><td>SDL_EVENT_PEN_DOWN<br>SDL_EVENT_PEN_UP</td><td><a href="SDL_PenTouchEvent.html">SDL_PenTouchEven</a></td><td>ptouch</td></tr>
<tr><td>SDL_EVENT_PEN_MOTION</td><td><a href="SDL_PenMotionEvent.html">SDL_PenMotionEvent</a></td><td>pmotion</td></tr>
<tr><td>SDL_EVENT_PEN_BUTTON_DOWN<br>SDL_EVENT_PEN_BUTTON_UP</td><td><a href="SDL_PenButtonEvent.html">SDL_PenButtonEvent</a></td><td>pbutton</td></tr>
<tr><td>SDL_EVENT_PEN_AXIS</td><td><a href="SDL_PenAxisEvent.html">SDL_PenAxisEvent</a></td><td>paxis</td></tr>
<tr><td>SDL_EVENT_QUIT</td><td><a href="SDL_QuitEvent.html">SDL_QuitEvent</a></td><td>quit</td></tr>
<tr><td>SDL_EVENT_SENSOR_UPDATE</td><td><a href="SDL_SensorEvent.html">SDL_SensorEvent</a></td><td>sensor</td></tr>
<tr><td>SDL_EVENT_TEXT_EDITING</td><td><a href="SDL_TextEditingEvent.html">SDL_TextEditingEvent</a></td><td>edit</td></tr>
<tr><td>SDL_EVENT_TEXT_EDITING_CANDIDATES</td><td><a href="SDL_TextEditingCandidatesEvent.html">SDL_TextEditingCandidatesEvent</a></td><td>edit_candidates</td></tr>
<tr><td>SDL_EVENT_TEXT_INPUT</td><td><a href="SDL_TextInputEvent.html">SDL_TextInputEvent</a></td><td>text</td></tr>
<tr><td>SDL_EVENT_USER</td><td><a href="SDL_UserEvent.html">SDL_UserEvent</a></td><td>user</td></tr>
<tr><td>SDL_EVENT_WINDOW_SHOWN<br>SDL_EVENT_WINDOW_HIDDEN<br>SDL_EVENT_WINDOW_EXPOSED<br>SDL_EVENT_WINDOW_MOVED<br>SDL_EVENT_WINDOW_RESIZED<br>SDL_EVENT_WINDOW_PIXEL_SIZE_CHANGED<br>SDL_EVENT_WINDOW_METAL_VIEW_RESIZED<br>SDL_EVENT_WINDOW_MINIMIZED<br>SDL_EVENT_WINDOW_MAXIMIZED<br>SDL_EVENT_WINDOW_RESTORED<br>SDL_EVENT_WINDOW_MOUSE_ENTER<br>SDL_EVENT_WINDOW_MOUSE_LEAVE<br>SDL_EVENT_WINDOW_FOCUS_GAINED<br>SDL_EVENT_WINDOW_FOCUS_LOST<br>SDL_EVENT_WINDOW_CLOSE_REQUESTED<br>SDL_EVENT_WINDOW_HIT_TEST<br>SDL_EVENT_WINDOW_ICCPROF_CHANGED<br>SDL_EVENT_WINDOW_DISPLAY_CHANGED<br>SDL_EVENT_WINDOW_DISPLAY_SCALE_CHANGED<br>SDL_EVENT_WINDOW_SAFE_AREA_CHANGED<br>SDL_EVENT_WINDOW_OCCLUDED<br>SDL_EVENT_WINDOW_ENTER_FULLSCREEN<br>SDL_EVENT_WINDOW_LEAVE_FULLSCREEN<br>SDL_EVENT_WINDOW_DESTROYED<br>SDL_EVENT_WINDOW_HDR_STATE_CHANGED</td><td><a href="SDL_WindowEvent.html">SDL_WindowEvent</a></td><td>window</td></tr>
<tr><td>その他のイベント</td><td><a href="SDL_CommonEvent.html">SDL_CommonEvent</a></td><td>common</td></tr>
</table>
<h2>SDL Wikiへのリンク</h2>
<a href="https://wiki.libsdl.org/SDL3/SDL_Event">SDL_Event - SDL Wiki</a><br>
<hr>
</body>
</html>
